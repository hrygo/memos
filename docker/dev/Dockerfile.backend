# 开发环境后端 Dockerfile
# 支持 Air 热重载

FROM golang:1.25-alpine

WORKDIR /app

# 安装 air (热重载工具) 和其他依赖
RUN apk add --no-cache git ca-certificates gcc musl-dev \
    && go install github.com/air-verse/air@latest

# 复制 go.mod 文件并下载依赖 (缓存层)
COPY go.mod go.sum ./
RUN go mod download

# 复制 air 配置
COPY docker/dev/.air.toml ./

# 默认命令在 docker-compose 中覆盖
CMD ["air", "-c", ".air.toml"]
